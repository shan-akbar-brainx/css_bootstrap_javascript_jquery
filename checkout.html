<html>
    <head>
        <title>Checkout</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <link rel="stylesheet" href="freshly-style-sheet-4.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
        <script src="mealsdata.js"></script>
        <script>
            $(document).ready(function(){
                $('[data-toggle="tooltip"]').tooltip();
                var reterivedObject = localStorage.getItem("mealCount");
                var mealsCount = JSON.parse(reterivedObject);

                var myMeals = document.getElementById("meals_count");

                for (var mealId in mealsCount){

                    const mealObj = meals.find(({id}) => id === mealId);
                    
                    var mealItem = document.createElement("DIV");
                    mealItem.classList.add("meal-div");
                    
                    var mealCount = document.createElement("DIV");
                    mealCount .classList.add("meal-count");
                    mealCount.innerHTML = mealsCount[mealId];
                    mealItem.appendChild(mealCount);

                    var itemImg = document.createElement("IMG");
                    var imgDiv = document.createElement("DIV");
                    imgDiv.appendChild(itemImg);
                    itemImg.src = mealObj.img;
                    mealItem.appendChild(itemImg);

                    var itemTitleDesc = document.createElement("DIV");
                    itemTitleDesc.classList.add("meal-title-desc");
                    var itemTitle = document.createElement("P");
                    itemTitle.classList.add("meal-title");
                    itemTitle.innerHTML = mealObj.title;

                    var itemDesc = document.createElement("SPAN");
                    itemDesc.classList.add("meal-desc");
                    itemDesc.innerHTML = mealObj.desc;
                    itemTitleDesc.appendChild(itemTitle);
                    itemTitleDesc.appendChild(itemDesc);
                    mealItem.appendChild(itemTitleDesc);

                    myMeals.appendChild(mealItem);
                }
            });
        </script>
    </head>
    <body>
        <div class="container-fluid">
            
            <div class="d-flex flex-column-reverse flex-md-row justify-content-center ml-lg-5 mr-lg-5" id="checkout_container">
                <div class="mt-5 ml-lg-5">
                    <h4 class="font-weight-bold ">Checkout</h4>
                    <form id="checkout_form" class="mt-4 mr-md-2 pl-md-5 pr-md-5 pt-3 pb-3 pl-2 pr-2">
                        <h5 class="font-weight-bold">Delivery Address</h5>
                        <div class="form-row mt-4">
                            <div class=" form-group col-12 col-md-6 ">
                                <label for="fname" class="control-label font-weight-bold">First Name</label>
                                <input type="text" class="form-control" id="fname" required>
                                <div class="invalid-feedback">Can't be blank</div>
                            </div>
                            <div class=" form-group col-12 col-md-6">
                                <label for="lname" class="control-label font-weight-bold">Last Name</label>
                                <input type="text" class="form-control" id="lname" required>
                                <div class="invalid-feedback">Can't be blank</div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class=" form-group col-12">
                                <label for="flname" class="control-label font-weight-bold">Full Name for Delivery Address</label>
                                <input type="text" class="form-control" id="flname">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class=" form-group col-12">
                                <input type="checkbox" id="check">
                                <label for="check" class="control-label font-weight-bold">My delivery address is same as first and last name</label>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class=" form-group col-12">
                                <label for="address1" class="control-label font-weight-bold">Address Line 1</label>
                                <input type="text"  class="form-control" id="address1" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class=" form-group col-12">
                                <label for="address1" class="control-label font-weight-bold">Address Line 2(optional)</label>
                                <input type="text"  class="form-control" id="address1">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class=" form-group col-12 col-md-5">
                                <label for="city" class="control-label font-weight-bold">City</label>
                                <input type="text" class="form-control" id="city">
                            </div>
                            <div class=" form-group col-6 col-md-4">
                                <label for="state" class="control-label font-weight-bold">State</label>
                                <input type="text" class="form-control" id="state">  
                            </div>
                            <div class=" form-group col-6 col-md-3">
                                <label for="zip" class="control-label font-weight-bold">Zip</label>
                                <input type="number" class="form-control" id="zip">  
                            </div>
                        </div>
                        <div class="form-row">
                            <div class=" form-group col-12">
                                <label for="phone" class="control-label font-weight-bold">Phone</label>
                                <input type="tel" class="form-control" id="phone">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class=" form-group col-12">
                                <input type="checkbox" id="check2">
                                <label for="check2" class="control-label font-weight-bold">Receive SMS text message updates on my orders</label>
                                <svg class="my-custom-tooltip" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" data-toggle="tooltip" data-placement="top" 
                                title="SMS text messages will be sent through an automatic telephone dialing system. This service is optional,
                                 and is not a condition of purchase. You can opt-out of receiving SMS messages at any time by texting STOP. Message
                                  and data rates may apply.">
                                    <g fill-rule="nonzero" fill="none">
                                    <circle cx="10" cy="10" r="9" stroke="#717171" >
                                    </circle>
                                    <text fill="#717171" font-family="Roboto-Black, Roboto" font-size="11" font-weight="700">
                                        <tspan x="8.751" y="13.5">i</tspan>
                                    </text>
                                    </g>
                                </svg>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class=" form-group col-12">
                                <label for="email" class="control-label font-weight-bold" >Email(We require your email to send you receipts and order updates)</label>
                                <input type="email" class="form-control" id="email" placeholder="username@example.com">
                            </div>
                        </div>
                        <div id="border_div"></div>
                        <div class = "row mt-3">
                            <div class="col-6"><p class="font-weight-bold">Today's Total</p></div>
                            <div class="col-6"><p class="font-weight-bold text-right">$70.45</p></div>
                        </div>
                        <button class="mt-2" type="button" id="next_btn">Next</button>
                    </form>
                </div>
                <div class="mt-5 ml-md-2 mr-lg-5">
                    <h4 class="font-weight-bold">Order Summary</h4>
                    <div id="order_summary" class="mt-4">
                        <p><a href="#"><u>+ Add Promo Code</u></a></p>
                        <label for="date_menu">Delivery Date</label>
                        <select class="form-control" id="date_menu" name="deliveryDates">
                            <option>Friday, September 17</option>
                            <option>Friday, September 17</option>
                            <option>Friday, September 17</option>
                            <option>Friday, September 17</option>
                        </select>
                        <div id="border_div"></div>
                        <div class = "row mt-3">
                            <div class="col-6"><p>6 Meals Per Week</p></div>
                            <div class="col-6"><p class="text-right">$59.94</p></div>
                        </div>
                        <div class = "row">
                            <div class="col-6"><p>Shipping</p></div>
                            <div class="col-6"><p class="text-right">$6.99</p></div>
                        </div>
                        <div class = "row">
                            <div class="col-6"><p>Today's Tax</p></div>
                            <div class="col-6"><p class="text-right">$3.52</p></div>
                        </div>
                        <div id="border_div"></div>
                        <div class = "row mt-3">
                            <div class="col-6"><p class="font-weight-bold">Today's Total</p></div>
                            <div class="col-6"><p class="font-weight-bold text-right">$70.45</p></div>
                        </div>
                    </div>
                    <h4 class="font-weight-bold mt-5">My Meals</h4>

                    <div id="meals_count">

                    </div>
                </div>
            </div>    
        </div>
        <embed class="mt-5" type="text/html" src="freshlyfaqs.html"  width="100%" height="100%">
    </body>
</html>